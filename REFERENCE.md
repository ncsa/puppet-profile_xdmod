# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`profile_xdmod`](#profile_xdmod): Empty init class
* [`profile_xdmod::client`](#profile_xdmod--client): Sets up collecting and transferring Slurm jobs to an xdmod server
* [`profile_xdmod::server`](#profile_xdmod--server): Setup some basic changes for an xdmod server

### Defined types

* [`profile_xdmod::server::allow_client`](#profile_xdmod--server--allow_client): Enable xdmod clients to copy logs to xdmod server

## Classes

### <a name="profile_xdmod"></a>`profile_xdmod`

This class should never be included. Depending on the role,
include one or more of the following:
- Node generating xdmod reports: `include profile_xdmod::client`
- Node running xdmod service: `include profile_xdmod::server`

#### Examples

##### 

```puppet
include profile_xdmod
```

### <a name="profile_xdmod--client"></a>`profile_xdmod::client`

Sets up collecting and transferring Slurm jobs to an xdmod server

#### Examples

##### 

```puppet
include profile_xdmod::client
```

#### Parameters

The following parameters are available in the `profile_xdmod::client` class:

* [`cron_hour`](#-profile_xdmod--client--cron_hour)
* [`cron_minute`](#-profile_xdmod--client--cron_minute)
* [`enable_report_generation`](#-profile_xdmod--client--enable_report_generation)
* [`enable_report_transfer`](#-profile_xdmod--client--enable_report_transfer)
* [`report_stage_dir`](#-profile_xdmod--client--report_stage_dir)
* [`ssh_key_priv`](#-profile_xdmod--client--ssh_key_priv)
* [`ssh_key_pub`](#-profile_xdmod--client--ssh_key_pub)
* [`ssh_key_type`](#-profile_xdmod--client--ssh_key_type)
* [`xdmod_dst_dir`](#-profile_xdmod--client--xdmod_dst_dir)
* [`xdmod_hostname`](#-profile_xdmod--client--xdmod_hostname)
* [`xdmod_service_acct`](#-profile_xdmod--client--xdmod_service_acct)

##### <a name="-profile_xdmod--client--cron_hour"></a>`cron_hour`

Data type: `Integer`

Hour at which to run the xdmod_report cron

##### <a name="-profile_xdmod--client--cron_minute"></a>`cron_minute`

Data type: `Integer`

Minute at which to run the xdmod_report cron

##### <a name="-profile_xdmod--client--enable_report_generation"></a>`enable_report_generation`

Data type: `Boolean`

Enable or disable the cron which builds the Slurm job report, saving it locally

##### <a name="-profile_xdmod--client--enable_report_transfer"></a>`enable_report_transfer`

Data type: `Boolean`

Enable or disable the transferring of the Slurm report to the xdmod server. This will only come into effect if `enable_report_generation` is also true

##### <a name="-profile_xdmod--client--report_stage_dir"></a>`report_stage_dir`

Data type: `String`

Dir to hold the xdmod reports before copying them to xdmod server

##### <a name="-profile_xdmod--client--ssh_key_priv"></a>`ssh_key_priv`

Data type: `String`

The private ssh key itself; generally a very long string...

##### <a name="-profile_xdmod--client--ssh_key_pub"></a>`ssh_key_pub`

Data type: `String`

The public ssh key itself; generally a long string...

##### <a name="-profile_xdmod--client--ssh_key_type"></a>`ssh_key_type`

Data type: `String`

The encryption type used in the ssh key.

##### <a name="-profile_xdmod--client--xdmod_dst_dir"></a>`xdmod_dst_dir`

Data type: `String`

Dir that client should copy reports to

##### <a name="-profile_xdmod--client--xdmod_hostname"></a>`xdmod_hostname`

Data type: `String`

xdmod hostname to copy reports to

##### <a name="-profile_xdmod--client--xdmod_service_acct"></a>`xdmod_service_acct`

Data type: `String`

Username of service account used when transferring reports to xdmod server

### <a name="profile_xdmod--server"></a>`profile_xdmod::server`

Setup xdmod server to allow transfers from xdmod client, this class does not install or configure the xdmod service itself

#### Examples

##### 

```puppet
include profile_xdmod::server
```

#### Parameters

The following parameters are available in the `profile_xdmod::server` class:

* [`additional_sshd_match_params`](#-profile_xdmod--server--additional_sshd_match_params)
* [`clients`](#-profile_xdmod--server--clients)
* [`gid`](#-profile_xdmod--server--gid)
* [`groupname`](#-profile_xdmod--server--groupname)
* [`slurm_log_parent_dir`](#-profile_xdmod--server--slurm_log_parent_dir)
* [`uid`](#-profile_xdmod--server--uid)
* [`username`](#-profile_xdmod--server--username)

##### <a name="-profile_xdmod--server--additional_sshd_match_params"></a>`additional_sshd_match_params`

Data type: `Hash`

Hash of additional sshd match parameters.
Passed to `sshd::allow_from` defined type from `profile_xdmod::server::allow_client`.

##### <a name="-profile_xdmod--server--clients"></a>`clients`

Data type: `Hash`

This is a hash that contains all the parameters for `profile_xdmod::server::allow_client`:
```yaml
profile_xdmod::server::clients:
  fqdn-of-client:
    ip: "172.1.2.3"
    ssh_key_pub: "AAAAB..."  # PUBLIC KEY
    ssh_key_type: "ssh-rsa"  # ENCRYPTION TYPE
```

##### <a name="-profile_xdmod--server--gid"></a>`gid`

Data type: `Integer`

Group id of user that owns xdmod report files.

##### <a name="-profile_xdmod--server--groupname"></a>`groupname`

Data type: `String`

Groupname that owns xdmod report files.

##### <a name="-profile_xdmod--server--slurm_log_parent_dir"></a>`slurm_log_parent_dir`

Data type: `String`

Parent directory path where Slurm logs to be shredded are stored

##### <a name="-profile_xdmod--server--uid"></a>`uid`

Data type: `Integer`

User id of user that owns xdmod report files.

##### <a name="-profile_xdmod--server--username"></a>`username`

Data type: `String`

Username that owns xdmod report files and allowed access.

## Defined types

### <a name="profile_xdmod--server--allow_client"></a>`profile_xdmod::server::allow_client`

Enable xdmod clients to copy logs to xdmod server

#### Examples

##### 

```puppet
profile_xdmod::server::allow_client { 'allow host hostname access to xdmod server':
  'ip' => String,
  'ssh_key_pub' => String,
  'ssh_key_type' => String,
}
```

#### Parameters

The following parameters are available in the `profile_xdmod::server::allow_client` defined type:

* [`ip`](#-profile_xdmod--server--allow_client--ip)
* [`ssh_key_pub`](#-profile_xdmod--server--allow_client--ssh_key_pub)
* [`ssh_key_type`](#-profile_xdmod--server--allow_client--ssh_key_type)

##### <a name="-profile_xdmod--server--allow_client--ip"></a>`ip`

Data type: `String`

ip of xdmod client.

##### <a name="-profile_xdmod--server--allow_client--ssh_key_pub"></a>`ssh_key_pub`

Data type: `String`

The public ssh key itself; generally a long string...

##### <a name="-profile_xdmod--server--allow_client--ssh_key_type"></a>`ssh_key_type`

Data type: `String`

The encryption type used in the ssh key.

